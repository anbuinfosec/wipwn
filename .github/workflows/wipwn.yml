name: ğŸš€ Full Deploy & Telegram Notify for WIPWN

on:
  push:
    branches: ["main"]
  workflow_dispatch:
  issues:
    types: [opened, edited, deleted, closed, reopened, labeled, unlabeled, assigned, unassigned]
  issue_comment:
    types: [created, edited, deleted]
  watch:
    types: [started]
  fork:
  pull_request:
    types: [opened, reopened, closed, edited, ready_for_review, converted_to_draft, synchronize]
  pull_request_review:
    types: [submitted, edited, dismissed]
  pull_request_review_comment:
    types: [created, edited, deleted]
  release:
    types: [published, unpublished, created, edited, deleted, prereleased, released]
  create:
  delete:
  workflow_run:
    workflows: ["*"]
    types: [completed, requested]
  public:
  status:
  page_build:
  gollum:

permissions:
  contents: read
  pages: write
  id-token: write

env:
  TZ: Asia/Dhaka

jobs:
  deploy:
    if: github.event_name == 'push' || github.event_name == 'workflow_dispatch'
    runs-on: ubuntu-latest
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}

    steps:
      - name: ğŸ“¥ Checkout Repository
        uses: actions/checkout@v4

      - name: âš™ï¸ Setup GitHub Pages
        uses: actions/configure-pages@v5

      - name: ğŸ“¦ Upload Static Files
        uses: actions/upload-pages-artifact@v3
        with:
          path: 'public'

      - name: ğŸš€ Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4

      - name: Get Advanced Repo Info
        id: repo_info
        run: |
          repo=${GITHUB_REPOSITORY}
          info=$(curl -s https://api.github.com/repos/$repo)
          stars=$(echo "$info" | jq -r '.stargazers_count // 0')
          forks=$(echo "$info" | jq -r '.forks_count // 0')
          watchers=$(echo "$info" | jq -r '.watchers_count // 0')
          issues=$(echo "$info" | jq -r '.open_issues_count // 0')
          language=$(echo "$info" | jq -r '.language // "Unknown"')
          size=$(echo "$info" | jq -r '.size // 0')
          license=$(echo "$info" | jq -r '.license.name // "No License"')
          description=$(echo "$info" | jq -r '.description // "No description"')
          
          # Get commit info
          commit_info=$(curl -s https://api.github.com/repos/$repo/commits/${GITHUB_SHA})
          commit_message=$(echo "$commit_info" | jq -r '.commit.message // "No message"' | head -1)
          commit_author=$(echo "$commit_info" | jq -r '.commit.author.name // "Unknown"')
          commit_date=$(echo "$commit_info" | jq -r '.commit.author.date // "Unknown"')
          
          # Get workflow info
          workflow_info=$(curl -s https://api.github.com/repos/$repo/actions/runs/${GITHUB_RUN_ID})
          workflow_duration=$(echo "$workflow_info" | jq -r '.run_duration_ms // 0')
          workflow_attempt=$(echo "$workflow_info" | jq -r '.run_attempt // 1')
          
          echo "STARS=$stars" >> $GITHUB_OUTPUT
          echo "FORKS=$forks" >> $GITHUB_OUTPUT
          echo "WATCHERS=$watchers" >> $GITHUB_OUTPUT
          echo "ISSUES=$issues" >> $GITHUB_OUTPUT
          echo "LANGUAGE=$language" >> $GITHUB_OUTPUT
          echo "SIZE=$size" >> $GITHUB_OUTPUT
          echo "LICENSE=$license" >> $GITHUB_OUTPUT
          echo "DESCRIPTION=$description" >> $GITHUB_OUTPUT
          echo "COMMIT_MESSAGE=$commit_message" >> $GITHUB_OUTPUT
          echo "COMMIT_AUTHOR=$commit_author" >> $GITHUB_OUTPUT
          echo "COMMIT_DATE=$commit_date" >> $GITHUB_OUTPUT
          echo "WORKFLOW_DURATION=$workflow_duration" >> $GITHUB_OUTPUT
          echo "WORKFLOW_ATTEMPT=$workflow_attempt" >> $GITHUB_OUTPUT

      - name: ï¿½ Advanced Telegram Notification â€“ Deployment
        run: |
          NOW=$(date '+%B %d, %Y at %I:%M %p')
          BRANCH=${GITHUB_REF#refs/heads/}
          COMMIT_SHORT=${GITHUB_SHA:0:7}
          
          TEXT="ğŸš€ **DEPLOYMENT COMPLETED SUCCESSFULLY!**
          
          ğŸ“Š **REPOSITORY STATISTICS:**
          â­ **Stars:** ${{ steps.repo_info.outputs.STARS }} | ğŸ´ **Forks:** ${{ steps.repo_info.outputs.FORKS }}
          ğŸ‘ï¸ **Watchers:** ${{ steps.repo_info.outputs.WATCHERS }} | ğŸ› **Open Issues:** ${{ steps.repo_info.outputs.ISSUES }}
          ğŸ’¾ **Size:** ${{ steps.repo_info.outputs.SIZE }}KB | ğŸ”¤ **Language:** ${{ steps.repo_info.outputs.LANGUAGE }}
          ğŸ“„ **License:** ${{ steps.repo_info.outputs.LICENSE }}
          
          ğŸ”„ **DEPLOYMENT DETAILS:**
          ğŸ‘¤ **Developer:** ${{ github.actor }}
          ğŸ“ **Repository:** [${{ github.repository }}](https://github.com/${{ github.repository }})
          ğŸŒ¿ **Branch:** \`$BRANCH\`
          ğŸ”— **Commit:** [\`$COMMIT_SHORT\`](https://github.com/${{ github.repository }}/commit/${GITHUB_SHA})
          ğŸ“ **Commit Message:** _${{ steps.repo_info.outputs.COMMIT_MESSAGE }}_
          âœï¸ **Commit Author:** ${{ steps.repo_info.outputs.COMMIT_AUTHOR }}
          
          âš¡ **WORKFLOW INFO:**
          ğŸ”„ **Run ID:** ${{ github.run_id }}
          ğŸ”¢ **Run Number:** ${{ github.run_number }}
          ğŸ¯ **Attempt:** ${{ steps.repo_info.outputs.WORKFLOW_ATTEMPT }}
          ğŸ• **Time:** $NOW (Asia/Dhaka)
          
          ğŸ“– **LINKS:**
          ğŸŒ [View Live Site](${{ steps.deployment.outputs.page_url }})
          ğŸ“Š [View Workflow](https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }})
          ğŸ” [View Commit](https://github.com/${{ github.repository }}/commit/${GITHUB_SHA})
          
          ğŸ“ˆ **Description:** ${{ steps.repo_info.outputs.DESCRIPTION }}"
          
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="Markdown" \
            -d disable_web_page_preview=true \
            -d text="$TEXT"

  notify_issue:
    if: github.event_name == 'issues'
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ Telegram Notification â€“ New Issue
        run: |
          NOW=$(date '+%B %d, %Y at %I:%M %p')
          TEXT="ğŸ› **New Issue Created!**
          
          ğŸ‘¤ **Author:** ${{ github.actor }}
          ğŸ“ **Repository:** [${{ github.repository }}](https://github.com/${{ github.repository }})
          ğŸ“ **Title:** _${{ github.event.issue.title }}_
          ğŸ• **Time:** $NOW
          
          ğŸ”— [View Issue](${{ github.event.issue.html_url }})"
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="Markdown" \
            -d disable_web_page_preview=true \
            -d text="$TEXT"

  notify_issue_comment:
    if: github.event_name == 'issue_comment'
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ’¬ Telegram Notification â€“ New Issue Comment
        run: |
          NOW=$(date '+%B %d, %Y at %I:%M %p')
          ISSUE_TITLE="${{ github.event.issue.title }}"
          COMMENT_BODY=$(echo "${{ github.event.comment.body }}" | head -c 200)
          TEXT="ğŸ’¬ **New Comment on Issue!**
          
          ğŸ‘¤ **Author:** ${{ github.actor }}
          ğŸ“ **Repository:** [${{ github.repository }}](https://github.com/${{ github.repository }})
          ğŸ› **Issue:** _${ISSUE_TITLE}_
          ğŸ’­ **Comment:** _${COMMENT_BODY}..._
          ğŸ• **Time:** $NOW
          
          ğŸ”— [View Comment](${{ github.event.comment.html_url }})"
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="Markdown" \
            -d disable_web_page_preview=true \
            -d text="$TEXT"

  notify_star:
    if: github.event_name == 'watch'
    runs-on: ubuntu-latest
    steps:
      - name: â­ Telegram Notification â€“ New Star
        run: |
          NOW=$(date '+%B %d, %Y at %I:%M %p')
          TEXT="â­ **New Star Received!**
          
          ğŸ‘¤ **Starred by:** ${{ github.actor }}
          ğŸ“ **Repository:** [${{ github.repository }}](https://github.com/${{ github.repository }})
          ğŸ• **Time:** $NOW
          
          ğŸ‰ **Thank you for starring the repository!**"
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="Markdown" \
            -d disable_web_page_preview=true \
            -d text="$TEXT"

  notify_fork:
    if: github.event_name == 'fork'
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ´ Telegram Notification â€“ New Fork
        run: |
          NOW=$(date '+%B %d, %Y at %I:%M %p')
          TEXT="ğŸ´ **New Fork Created!**
          
          ğŸ‘¤ **Forked by:** ${{ github.actor }}
          ğŸ“ **Repository:** [${{ github.repository }}](https://github.com/${{ github.repository }})
          ğŸ• **Time:** $NOW
          
          ï¿½ **Happy forking & coding!**"
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="Markdown" \
            -d disable_web_page_preview=true \
            -d text="$TEXT"

  notify_pull_request:
    if: github.event_name == 'pull_request'
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ”€ Telegram Notification â€“ Pull Request
        run: |
          NOW=$(date '+%B %d, %Y at %I:%M %p')
          PR_TITLE="${{ github.event.pull_request.title }}"
          PR_URL="${{ github.event.pull_request.html_url }}"
          ACTION="${{ github.event.action }}"
          MERGED="${{ github.event.pull_request.merged }}"
          MSG=""
          if [ "$ACTION" = "opened" ] || [ "$ACTION" = "reopened" ]; then
            MSG="ğŸ”€ **Pull Request ${ACTION^}!**
            
            ğŸ‘¤ **Author:** ${{ github.actor }}
            ğŸ“ **Repository:** [${{ github.repository }}](https://github.com/${{ github.repository }})
            ğŸ“ **Title:** _${PR_TITLE}_
            ğŸ• **Time:** $NOW
            
            ğŸ”— [View PR](${PR_URL})"
          elif [ "$ACTION" = "closed" ] && [ "$MERGED" = "true" ]; then
            MSG="âœ… **Pull Request Merged!**
            
            ğŸ‘¤ **Author:** ${{ github.actor }}
            ğŸ“ **Repository:** [${{ github.repository }}](https://github.com/${{ github.repository }})
            ğŸ“ **Title:** _${PR_TITLE}_
            ğŸ• **Time:** $NOW
            
            ğŸ”— [View PR](${PR_URL})"
          elif [ "$ACTION" = "closed" ] && [ "$MERGED" = "false" ]; then
            MSG="âŒ **Pull Request Closed!**
            
            ğŸ‘¤ **Author:** ${{ github.actor }}
            ğŸ“ **Repository:** [${{ github.repository }}](https://github.com/${{ github.repository }})
            ğŸ“ **Title:** _${PR_TITLE}_
            ğŸ• **Time:** $NOW
            
            ğŸ”— [View PR](${PR_URL})"
          fi
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="Markdown" \
            -d disable_web_page_preview=true \
            -d text="$MSG"

  # Advanced Notifications for All Repository Events
  notify_push:
    if: github.event_name == 'push' && github.ref == 'refs/heads/main'
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¤ Push Notification
        run: |
          NOW=$(date '+%B %d, %Y at %I:%M %p')
          BRANCH=${GITHUB_REF#refs/heads/}
          COMMIT_SHORT=${GITHUB_SHA:0:7}
          TEXT="ğŸ“¤ **New Push to Main Branch!**
          
          ğŸ‘¤ **Developer:** ${{ github.actor }}
          ğŸ“ **Repository:** [${{ github.repository }}](https://github.com/${{ github.repository }})
          ğŸŒ¿ **Branch:** \`$BRANCH\`
          ğŸ”— **Commit:** [\`$COMMIT_SHORT\`](https://github.com/${{ github.repository }}/commit/${GITHUB_SHA})
          ğŸ“ **Files Changed:** ${{ github.event.head_commit.modified }}
          ğŸ• **Time:** $NOW (Asia/Dhaka)
          
          ğŸ“Š [View Commit](https://github.com/${{ github.repository }}/commit/${GITHUB_SHA})"
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="Markdown" \
            -d disable_web_page_preview=true \
            -d text="$TEXT"

  notify_pr_review:
    if: github.event_name == 'pull_request_review'
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“‹ PR Review Notification
        run: |
          NOW=$(date '+%B %d, %Y at %I:%M %p')
          ACTION="${{ github.event.action }}"
          STATE="${{ github.event.review.state }}"
          REVIEW_BODY="${{ github.event.review.body }}"
          
          if [ "$ACTION" = "submitted" ]; then
            if [ "$STATE" = "approved" ]; then
              ICON="âœ…"
              STATUS="Approved"
            elif [ "$STATE" = "changes_requested" ]; then
              ICON="ğŸ”„"
              STATUS="Changes Requested"
            else
              ICON="ğŸ’­"
              STATUS="Commented"
            fi
          else
            ICON="ğŸ“"
            STATUS="$ACTION"
          fi
          
          TEXT="$ICON **Pull Request Review $STATUS!**
          
          ğŸ‘¤ **Reviewer:** ${{ github.actor }}
          ğŸ“ **Repository:** [${{ github.repository }}](https://github.com/${{ github.repository }})
          ğŸ”€ **PR:** _${{ github.event.pull_request.title }}_
          ğŸ“ **Review:** _${REVIEW_BODY}_
          ğŸ• **Time:** $NOW (Asia/Dhaka)
          
          ğŸ”— [View Review](${{ github.event.review.html_url }})"
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="Markdown" \
            -d disable_web_page_preview=true \
            -d text="$TEXT"

  notify_pr_review_comment:
    if: github.event_name == 'pull_request_review_comment'
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ’¬ PR Review Comment Notification
        run: |
          NOW=$(date '+%B %d, %Y at %I:%M %p')
          ACTION="${{ github.event.action }}"
          COMMENT_BODY=$(echo "${{ github.event.comment.body }}" | head -c 200)
          
          TEXT="ğŸ’¬ **PR Review Comment $ACTION!**
          
          ğŸ‘¤ **Author:** ${{ github.actor }}
          ğŸ“ **Repository:** [${{ github.repository }}](https://github.com/${{ github.repository }})
          ğŸ”€ **PR:** _${{ github.event.pull_request.title }}_
          ğŸ’­ **Comment:** _${COMMENT_BODY}..._
          ğŸ• **Time:** $NOW (Asia/Dhaka)
          
          ğŸ”— [View Comment](${{ github.event.comment.html_url }})"
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="Markdown" \
            -d disable_web_page_preview=true \
            -d text="$TEXT"

  notify_release:
    if: github.event_name == 'release'
    runs-on: ubuntu-latest
    steps:
      - name: ğŸš€ Release Notification
        run: |
          NOW=$(date '+%B %d, %Y at %I:%M %p')
          ACTION="${{ github.event.action }}"
          RELEASE_NAME="${{ github.event.release.name }}"
          RELEASE_TAG="${{ github.event.release.tag_name }}"
          RELEASE_BODY=$(echo "${{ github.event.release.body }}" | head -c 300)
          
          if [ "$ACTION" = "published" ]; then
            ICON="ğŸ‰"
            STATUS="Published"
          elif [ "$ACTION" = "created" ]; then
            ICON="ğŸ“¦"
            STATUS="Created"
          else
            ICON="ğŸ”„"
            STATUS="$ACTION"
          fi
          
          TEXT="$ICON **Release $STATUS!**
          
          ğŸ‘¤ **Publisher:** ${{ github.actor }}
          ğŸ“ **Repository:** [${{ github.repository }}](https://github.com/${{ github.repository }})
          ğŸ·ï¸ **Release:** _${RELEASE_NAME}_ (${RELEASE_TAG})
          ğŸ“ **Notes:** _${RELEASE_BODY}..._
          ğŸ• **Time:** $NOW (Asia/Dhaka)
          
          ğŸ“¦ [View Release](${{ github.event.release.html_url }})"
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="Markdown" \
            -d disable_web_page_preview=true \
            -d text="$TEXT"

  notify_branch_tag:
    if: github.event_name == 'create' || github.event_name == 'delete'
    runs-on: ubuntu-latest
    steps:
      - name: ğŸŒ¿ Branch/Tag Notification
        run: |
          NOW=$(date '+%B %d, %Y at %I:%M %p')
          REF_TYPE="${{ github.event.ref_type }}"
          REF_NAME="${{ github.event.ref }}"
          ACTION="${{ github.event_name }}"
          
          if [ "$ACTION" = "create" ]; then
            ICON="âœ¨"
            STATUS="Created"
          else
            ICON="ğŸ—‘ï¸"
            STATUS="Deleted"
          fi
          
          TEXT="$ICON **$REF_TYPE $STATUS!**
          
          ğŸ‘¤ **Author:** ${{ github.actor }}
          ğŸ“ **Repository:** [${{ github.repository }}](https://github.com/${{ github.repository }})
          ğŸ·ï¸ **$REF_TYPE Name:** \`$REF_NAME\`
          ğŸ• **Time:** $NOW (Asia/Dhaka)
          
          ğŸ”— [View Repository](https://github.com/${{ github.repository }})"
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="Markdown" \
            -d disable_web_page_preview=true \
            -d text="$TEXT"

  notify_workflow_run:
    if: github.event_name == 'workflow_run'
    runs-on: ubuntu-latest
    steps:
      - name: âš™ï¸ Workflow Run Notification
        run: |
          NOW=$(date '+%B %d, %Y at %I:%M %p')
          WORKFLOW_NAME="${{ github.event.workflow_run.name }}"
          CONCLUSION="${{ github.event.workflow_run.conclusion }}"
          STATUS="${{ github.event.workflow_run.status }}"
          BRANCH="${{ github.event.workflow_run.head_branch }}"
          
          if [ "$CONCLUSION" = "success" ]; then
            ICON="âœ…"
          elif [ "$CONCLUSION" = "failure" ]; then
            ICON="âŒ"
          elif [ "$CONCLUSION" = "cancelled" ]; then
            ICON="ğŸš«"
          else
            ICON="âš™ï¸"
          fi
          
          TEXT="$ICON **Workflow $STATUS!**
          
          ğŸ‘¤ **Triggered by:** ${{ github.actor }}
          ğŸ“ **Repository:** [${{ github.repository }}](https://github.com/${{ github.repository }})
          âš™ï¸ **Workflow:** _${WORKFLOW_NAME}_
          ğŸŒ¿ **Branch:** \`$BRANCH\`
          ğŸ“Š **Status:** $STATUS
          ğŸ¯ **Conclusion:** $CONCLUSION
          ğŸ• **Time:** $NOW (Asia/Dhaka)
          
          ğŸ“Š [View Workflow Run](${{ github.event.workflow_run.html_url }})"
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="Markdown" \
            -d disable_web_page_preview=true \
            -d text="$TEXT"

  notify_wiki:
    if: github.event_name == 'gollum'
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“š Wiki Notification
        run: |
          NOW=$(date '+%B %d, %Y at %I:%M %p')
          PAGE_NAME="${{ github.event.pages[0].page_name }}"
          ACTION="${{ github.event.pages[0].action }}"
          
          TEXT="ğŸ“š **Wiki Page $ACTION!**
          
          ğŸ‘¤ **Editor:** ${{ github.actor }}
          ğŸ“ **Repository:** [${{ github.repository }}](https://github.com/${{ github.repository }})
          ğŸ“„ **Page:** _${PAGE_NAME}_
          ğŸ• **Time:** $NOW (Asia/Dhaka)
          
          ğŸ“š [View Wiki](https://github.com/${{ github.repository }}/wiki)"
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="Markdown" \
            -d disable_web_page_preview=true \
            -d text="$TEXT"

  notify_public:
    if: github.event_name == 'public'
    runs-on: ubuntu-latest
    steps:
      - name: ğŸŒ Repository Made Public
        run: |
          NOW=$(date '+%B %d, %Y at %I:%M %p')
          TEXT="ğŸŒ **Repository Made Public!**
          
          ğŸ‘¤ **Actor:** ${{ github.actor }}
          ğŸ“ **Repository:** [${{ github.repository }}](https://github.com/${{ github.repository }})
          ğŸ• **Time:** $NOW (Asia/Dhaka)
          
          ğŸŒ Now everyone can see this repository!
          ğŸ”— [View Repository](https://github.com/${{ github.repository }})"
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="Markdown" \
            -d disable_web_page_preview=true \
            -d text="$TEXT"

  notify_status:
    if: github.event_name == 'status'
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“Š Status Check Update
        run: |
          NOW=$(date '+%B %d, %Y at %I:%M %p')
          STATE="${{ github.event.state }}"
          CONTEXT="${{ github.event.context }}"
          DESCRIPTION="${{ github.event.description }}"
          
          case "$STATE" in
            "success") ICON="âœ…" ;;
            "failure") ICON="âŒ" ;;
            "error") ICON="ğŸš¨" ;;
            "pending") ICON="â³" ;;
            *) ICON="ğŸ“Š" ;;
          esac
          
          TEXT="$ICON **Status Check Update!**
          
          ğŸ“Š **Status:** $STATE
          ğŸ” **Context:** $CONTEXT
          ğŸ“ **Description:** $DESCRIPTION
          ğŸ“ **Repository:** [${{ github.repository }}](https://github.com/${{ github.repository }})
          ğŸ• **Time:** $NOW (Asia/Dhaka)
          
          ğŸ”— [View Repository](https://github.com/${{ github.repository }})"
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="Markdown" \
            -d disable_web_page_preview=true \
            -d text="$TEXT"

  notify_page_build:
    if: github.event_name == 'page_build'
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“„ Pages Build Update
        run: |
          NOW=$(date '+%B %d, %Y at %I:%M %p')
          STATUS="${{ github.event.build.status }}"
          ERROR="${{ github.event.build.error.message }}"
          
          if [ "$STATUS" = "built" ]; then
            ICON="âœ…"
            STATUS_TEXT="Successfully Built"
          else
            ICON="âŒ"
            STATUS_TEXT="Build Failed"
          fi
          
          TEXT="$ICON **GitHub Pages Build $STATUS_TEXT!**
          
          ğŸ“„ **Status:** $STATUS
          ğŸ“ **Repository:** [${{ github.repository }}](https://github.com/${{ github.repository }})
          ğŸ• **Time:** $NOW (Asia/Dhaka)"
          
          if [ -n "$ERROR" ]; then
            TEXT="$TEXT
          
          âš ï¸ **Error:** $ERROR"
          fi
          
          TEXT="$TEXT
          
          ğŸ”— [View Repository](https://github.com/${{ github.repository }})"
          
          curl -s -X POST https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="Markdown" \
            -d disable_web_page_preview=true \
            -d text="$TEXT"
